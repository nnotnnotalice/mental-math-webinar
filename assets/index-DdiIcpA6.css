:root{--accent: #8A8EE9;--accent-hover: #7075e2;--result-bg: #F0F1FD;--text-color: #111827;--muted: #6B7280;--error: #f97373;--error-bg: #FEF2F2;--card-bg: #ffffff;--panel-bg: #ffffff;--border: #e5e7eb;--shadow: 0 4px 10px rgba(138, 142, 233, .18);--ok-bg: #DCFCE7;--ok-border: #22c55e;--footer-h: 96px}*{box-sizing:border-box}html,body{height:100%}body{font-family:Nunito,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;margin:0;background:#fff;color:var(--text-color)}button,input,textarea,select{font-family:inherit}.app{min-height:100vh;display:flex;flex-direction:column}.topbar{background:var(--accent);color:#fff;padding:18px 16px;border:none;box-shadow:0 6px 18px #8a8ee940}.topbar__title{margin:0;width:100%;text-align:center;font-weight:700;font-size:40px;letter-spacing:.2px}.content{padding:18px 14px 0;padding-bottom:calc(var(--footer-h) + 16px);max-width:980px;width:100%;margin:0 auto}.panel{max-width:980px;margin:0 auto;padding:24px;background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}.panel--task{padding-bottom:calc(var(--footer-h) + 16px)}@media(max-width:700px)and (orientation:portrait){:root{--footer-h: 170px}.content{max-width:100%;width:100%}.panel{max-width:100%;width:100%;margin:0;padding:16px}.taskHeader{flex-direction:column;align-items:stretch}}.taskHeader{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:18px}.h1{margin:10px 0 12px;font-size:24px;font-weight:700;line-height:1.25;color:var(--text-color)}.hint{font-size:18px;color:#9ca3af;line-height:1.4;margin-top:2px}.crumb{color:var(--muted);font-size:14px;margin-bottom:6px}.stack{display:flex;flex-direction:column;gap:16px;margin-top:12px}@keyframes cardEnter{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.exprCard{position:relative;background:#fff;border-radius:14px;border:1px solid #e5e7eb;box-shadow:var(--shadow);padding:16px 18px}.exprCard--enter{animation:cardEnter .38s ease}.exprCard--inactive{opacity:.55}.exprCard--active{outline:none;box-shadow:0 0 0 2px #8a8ee940,0 8px 18px #8a8ee938}.overlayLeft{position:absolute;left:3%;top:4%;font-family:Nunito;font-size:40px;display:flex;align-items:center;gap:12px}.cupInput--locked{opacity:1;background:#fffffff2;color:#1118278c;border-color:#5691f033;box-shadow:none}.scalesWrap{--ui: 1}@media(max-width:480px)and (orientation:portrait){.overlayRight{left:50%;transform:translate(-50%) translateY(var(--rightShift, 0px))}}.overlayLeft,.overlayRight{font-size:calc(40px * var(--ui))}.rightExprRow{gap:calc(10px * var(--ui))}.cupInput{width:calc(74px * var(--ui));height:calc(50px * var(--ui));font-size:calc(34px * var(--ui));border-radius:calc(14px * var(--ui))}.cupInput--result{width:calc(84px * var(--ui))}.cupChip{width:calc(68px * var(--ui));height:calc(48px * var(--ui));font-size:calc(34px * var(--ui));border-radius:calc(16px * var(--ui))}.cupChip--result{width:calc(74px * var(--ui))}.scalesSvg{display:block;width:min(920px,100%);height:auto}#beam,#rightGroup{transform-box:fill-box;transform-origin:50% 50%}.bowlValue{font-family:Nunito,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;font-size:18px;font-weight:700;fill:#2d2e83;text-anchor:middle;dominant-baseline:middle;pointer-events:none}.scalesWrap{position:relative;width:100%;display:flex;justify-content:center;margin:12px 0 16px}.scalesWrap .scalesSvg{width:min(920px,100%);height:auto;display:block}.scalesWrap{overflow:visible}.scalesOverlay{position:absolute;inset:0;pointer-events:none}.scalesOverlay input,.scalesOverlay button{pointer-events:auto}.scalesWrap>svg{position:relative;z-index:1}.scalesOverlay{z-index:2}.scalesOverlay button{pointer-events:auto}.overlayLeft{position:absolute;left:2%;top:4%;font-family:Nunito;font-size:40px;display:flex;align-items:center;gap:12px}.chipNum--hl{background:#b7b3ffe6;border-radius:8px;padding:0 6px}.chipResPlaceholder{display:inline-block;width:34px}.overlayRight{position:absolute;left:61%;top:4%;font-family:Nunito;font-size:40px;transform:translateY(var(--rightShift, 0px));transition:transform .45s ease-out;will-change:transform}.rightExprRow{display:flex;align-items:center;gap:10px}.cupInput{width:74px;height:50px;border-radius:14px;border:2px solid rgba(86,145,240,.35);background:#fffffff2;text-align:center;font-family:Nunito;font-size:34px;font-weight:700;color:#111;padding:0}.cupInput--result{width:84px}.cupInput--active{outline:none;border-color:#8a8ee9f2;box-shadow:0 0 0 4px #8a8ee92e}.cupInput--hl{background:var(--ok-bg);border-color:var(--ok-border);box-shadow:0 0 0 4px #22c55e2e;color:#111827}.cupChip{width:68px;height:48px;border-radius:16px;border:none;background:#fffffff2;display:inline-flex;align-items:center;justify-content:center;font-family:Nunito;font-size:34px;font-weight:800;color:#111;-webkit-user-select:none;user-select:none}.cupChip--result{width:74px}.cupChip--filled{color:#111827}.cupChip--hl{background:#c5c9f4;box-shadow:0 6px 16px #8a8ee938}.hint--a{left:0}.hint--b{left:120px}.overlayPick{border:none;background:#b7b3ff;border-radius:10px;padding:6px 10px;font:inherit;cursor:pointer}.overlayPick--disabled{opacity:.5;cursor:default}.exprLabel{font-weight:700;margin-bottom:10px}.exprRow{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:16px}.plus{opacity:.85;font-weight:800}.slot{padding:8px;border-radius:14px;border:1px dashed rgba(231,238,252,.22);min-width:64px;display:flex;justify-content:center;align-items:center}.slot--ok .token{background:var(--ok-bg);border-color:#22c55e59;box-shadow:inset 0 -2px #22c55e2e}.token{min-width:56px;min-height:56px;display:flex;align-items:center;justify-content:center;padding:0;border-radius:14px;border:1px solid var(--border);font-size:26px;font-weight:800;line-height:1;text-align:center;-webkit-user-select:none;user-select:none;background:#fff;color:var(--text-color)}.token--movable{border:2px solid rgba(138,142,233,.7);outline:none;cursor:grab;box-shadow:0 0 0 3px #8a8ee926}.token--fixed{opacity:.95}.token--disabled{opacity:.55;pointer-events:none}.answerRow{display:flex;align-items:center;gap:12px;margin-top:12px}.answerInput{flex:0 0 120px;width:120px;height:56px;border-radius:14px;border:2px solid rgba(138,142,233,.35);background:#fff;color:var(--text-color);font-size:26px;font-weight:800;text-align:center}.answerInput:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px #8a8ee940}.answerInput--ok{background:var(--ok-bg);border-color:#22c55e8c}.btn-primary{width:auto;flex:0 0 auto;padding:10px 14px;font-size:18px;font-weight:700;border-radius:10px;border:none;background:var(--accent);color:#fff;cursor:pointer;box-shadow:0 4px 10px #8a8ee966;transition:transform .08s ease,box-shadow .15s ease,background .15s ease}.btn-primary:hover{background:var(--accent-hover);box-shadow:0 5px 14px #8a8ee98c}.btn-primary:active{transform:scale(.97);box-shadow:0 3px 8px #8a8ee959}.status{margin-top:10px;font-weight:700}.status--warn{color:#ef4444}.footerNav{position:fixed;left:0;right:0;bottom:0;padding:10px;background:#fff;border-top:1px solid #e5e7eb;box-shadow:0 -6px 18px #1118270f;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.footerNav__scroll{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:8px}.footerBtn{border:1px solid #e5e7eb;background:#fff;color:var(--text-color);border-radius:14px;padding:18px 16px;cursor:pointer;display:flex;gap:12px;align-items:center;justify-content:center;box-shadow:0 4px 10px #8a8ee92e}.footerBtn__icon{font-size:26px}.footerBtn__text{font-size:18px;color:var(--muted)}@media(max-width:700px){.footerNav__scroll{grid-template-columns:repeat(3,minmax(0,1fr))}.footerBtn{padding:12px 10px;gap:8px}.footerBtn__icon{font-size:22px}.footerBtn__text{font-size:14px}}@media(orientation:landscape)and (max-height:500px){.content{padding-left:10px;padding-right:10px}.panel{border-radius:14px}:root{--footer-h: 96px}.footerNav__scroll{grid-template-columns:repeat(5,minmax(0,1fr));gap:6px}.footerBtn{padding:10px;gap:8px;border-radius:12px}.footerBtn__icon{font-size:20px}.footerBtn__text{font-size:14px}}.footerNav{left:0;right:0;width:100%}.footerNav__scroll{width:100%;max-width:100%}.footerBtn{min-width:0;width:100%}.footerBtn__icon{flex:0 0 auto}.footerBtn__text{min-width:0;white-space:normal;text-align:center}@media(max-width:700px)and (orientation:portrait){.footerNav__scroll{grid-template-columns:repeat(3,minmax(0,1fr))!important}.footerBtn{flex-direction:column;gap:6px;padding:10px 8px}.footerBtn__text{font-size:13px;line-height:1.1}}.exprEquals{margin-left:10px;font-weight:900;font-size:34px;color:var(--text-color);white-space:nowrap}.exprSolvedRow{margin-top:14px;display:flex;justify-content:flex-start}.exprCheck{width:44px;height:44px;display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:900;color:#16a34a;background:#ecfdf5;border-radius:12px;box-shadow:0 2px 6px #16a34a40}.exprSolvedMark{position:absolute;left:16px;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#eaf7ef;color:#22c55e;font-size:26px;font-weight:900;box-shadow:0 4px 10px #22c55e40}.exprCard--withMark .exprRow,.exprCard--withMark .exprHintRow,.exprCard--withMark .exprSolvedRow{padding-left:64px}.exprHintRow{margin-top:10px}.exprHint{display:inline-block;padding:10px 12px;border-radius:14px;background:#f3f4f6;color:#374151;font-size:14px;font-weight:700;line-height:1.2;white-space:nowrap;box-shadow:inset 0 -2px #0000000f}.exprHint--ok{background:var(--ok-bg);color:#166534;box-shadow:inset 0 -2px #22c55e40}.exprHint--warn{background:var(--error-bg);color:#991b1b;box-shadow:inset 0 -2px #ef44442e}.pickToken{border:2px solid rgba(138,142,233,.45);background:#fff;cursor:pointer}.pickToken:hover{background:#f3f4ff}.pickToken--disabled{opacity:.55;cursor:not-allowed}.magnetSteps{margin-top:14px}.magnetInputs{display:flex;align-items:center;gap:12px}.magnetOp{font-size:28px;font-weight:800;color:var(--text-color);line-height:1;display:flex;align-items:center;justify-content:center}.magnetCell{position:relative;display:flex;flex-direction:column;align-items:center}.magnetBubble{position:absolute;top:-44px;left:50%;transform:translate(-50%);padding:10px 12px;border-radius:14px;background:#e6f9ee;color:#065f46;font-size:14px;font-weight:800;white-space:nowrap;box-shadow:inset 0 -3px #10b98140}.magnetInput{width:120px;height:56px;border-radius:14px;border:2px solid rgba(138,142,233,.35);font-size:22px;font-weight:800;text-align:center;outline:none;background:#fff;color:var(--text-color)}.magnetInput:focus{border-color:var(--accent);box-shadow:0 0 0 2px #8a8ee940}.magnetInput--ok{background:var(--ok-bg);border-color:var(--ok-border)}.magnetCard .magPick{border:2px solid rgba(138,142,233,.45);background:#fff;cursor:pointer;transition:background .15s ease,border-color .15s ease,box-shadow .15s ease}.magnetCard .magPick:hover{background:#f3f4ff;box-shadow:0 0 0 3px #8a8ee926}.magnetCard .magPick--donor{border-color:#8a8ee9b3;box-shadow:0 0 0 3px #8a8ee91a}.magnetCard .magPick--picked{border-color:#8a8ee9e6;box-shadow:0 0 0 4px #8a8ee92e}.exprCard--inactive .magPick{opacity:.55}.gradeGrid,.gradeRow,.gradeButtons{display:flex;gap:14px;justify-content:center;align-items:stretch}.gradeBtn{flex:1;max-width:420px;padding:18px 16px;border-radius:12px;border:2px solid rgba(138,142,233,.35);background:#fff;color:var(--text-color);font-weight:800;font-size:22px;text-align:center;cursor:pointer;box-shadow:0 6px 16px #8a8ee933;transition:transform .08s ease,box-shadow .15s ease,background .15s ease}.gradeBtn:hover{background:#f3f4ff;box-shadow:0 8px 18px #8a8ee947}.gradeBtn:active{transform:scale(.98)}.pickMenu{position:absolute;z-index:20;display:grid;gap:10px;padding:10px;border-radius:14px;background:#fff;border:2px solid rgba(138,142,233,.35);box-shadow:0 10px 22px #1118271a}.pickMenu__item{width:220px;max-width:260px;padding:12px 14px;border-radius:12px;border:2px solid rgba(138,142,233,.35);background:#fff;font-size:20px;font-weight:800;font-family:Nunito;text-align:center;cursor:pointer;box-shadow:0 6px 14px #8a8ee92e;transition:transform .08s ease,box-shadow .15s ease,background .15s ease}.pickMenu__item:hover{background:#f3f4ff;box-shadow:0 8px 18px #8a8ee942}.pickMenu__item:active{transform:scale(.98)}.pickMenu__item{-webkit-appearance:none;appearance:none}.grid3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:24px}@media(max-width:720px){.grid3{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(max-width:420px){.grid3{grid-template-columns:1fr}}.iconBtn{-webkit-appearance:none;appearance:none;width:100%;min-height:64px;display:flex;align-items:center;justify-content:center;gap:10px;padding:18px 16px;border-radius:12px;border:2px solid rgba(138,142,233,.35);background:#fff;color:var(--text-color);font-family:Nunito;font-size:18px;font-weight:800;text-align:center;box-shadow:0 6px 16px #8a8ee933;cursor:pointer;transition:transform .08s ease,box-shadow .15s ease,background .15s ease,border-color .15s ease}.iconBtn:hover{background:#f3f4ff;border-color:#8a8ee973;box-shadow:0 8px 18px #8a8ee947}.iconBtn:active{transform:scale(.98)}.iconBtn:disabled{opacity:.55;cursor:not-allowed}.iconBtn__icon{font-size:22px;line-height:1}.iconBtn__text{display:flex;flex-direction:column;align-items:center;gap:2px;line-height:1.1}.iconBtn__title{font-weight:800;font-size:18px}.iconBtn__subtitle{font-weight:700;font-size:13px;color:var(--muted)}.linkBtn{-webkit-appearance:none;appearance:none;display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:10px;border:2px solid var(--accent);background:#fff;color:var(--accent);font-size:16px;font-weight:800;cursor:pointer;box-shadow:0 4px 10px #8a8ee940;transition:transform .08s ease,box-shadow .15s ease,background .15s ease}.linkBtn:hover{background:#f3f4ff;box-shadow:0 5px 14px #8a8ee959}.linkBtn:active{transform:scale(.98);box-shadow:0 3px 8px #8a8ee940}.token--clickable{border:2px solid rgba(138,142,233,.45);cursor:pointer;transition:background .15s ease,border-color .15s ease,box-shadow .15s ease}.token--clickable:hover{background:#f3f4ff;box-shadow:0 0 0 3px #8a8ee92e}.token--clickable.token--picked{border-color:#8a8ee9e6;box-shadow:0 0 0 4px #8a8ee938}.exprCard--inactive .token--clickable{opacity:.55;pointer-events:none}.exprCard--solved .magPick,.exprCard--solved .slot{pointer-events:none}.exprCard--solved .magPick{cursor:default;background:#fff;box-shadow:none;border-color:#e5e7ebe6}.exprCard--solved .magPick--donor,.exprCard--solved .magPick--picked{box-shadow:none;border-color:#e5e7ebe6}.exprCard--solved .slot{cursor:default}.exprCard--solved .magPick{pointer-events:none;cursor:default;background:#1118270a;border-color:#e5e7eb;color:#1118278c;box-shadow:none}.exprCard--solved .magPick:hover{background:#1118270a;box-shadow:none}.exprCard--solved .magPick--donor,.exprCard--solved .magPick--picked{border-color:#e5e7eb;box-shadow:none}.exprRow--solved .slot{background:#f3f4f6;border-color:#1118270f}.exprRow--solved .token{opacity:.65}.exprRow--solved .plus{opacity:.45}.exprCard--solved .magPick,.exprCard--solved .slot{pointer-events:none;cursor:default}.exprCard--solved .magPick:hover{background:#fff;box-shadow:none}.magnetCard.exprCard--solved .token{background:#fff}.magnetCard.exprCard--solved .slot{background:transparent}.magnetCard.exprCard--solved .exprSolvedMark{background:#ecfdf5;color:#86efac;box-shadow:none;opacity:.7}.exprCard--solved .exprEquals{color:#9ca3af;font-weight:800}.actions{margin-top:24px}.status--warn{display:inline-block;padding:10px 12px;border-radius:14px;background:var(--error-bg);color:#991b1b;font-size:14px;font-weight:700;line-height:1.2;white-space:nowrap;box-shadow:inset 0 -2px #ef44442e}.scalesRow{display:flex;align-items:center;gap:14px;flex-wrap:wrap}.scaleSide{position:relative;width:140px;height:120px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;transition:transform .28s ease}.scaleCup{margin-top:6px;opacity:.95}.overlayLeft .cupChip{background:#ffd1a3;color:#1f2937;border:none;box-shadow:inset 0 -2px #0000001f}.overlayLeft .cupChip--result{background:#ffe2c4}.overlayLeft .cupChip--hl{background:#e6f9ee;box-shadow:0 4px 10px #023a202e}.scaleSide--down{transform:translateY(14px)}.scaleSide--up{transform:translateY(-10px)}.scaleSide--balanced{transform:translateY(0)}.scaleNumWrap{margin-top:10px}.scaleNum{border:2px solid rgba(229,231,235,1)}.scalesOverlay .hint{position:absolute;top:-65px;padding:16px 18px;border-radius:14px;background:#e6f9ee;color:#065f46;font-size:20px;font-weight:800;white-space:nowrap;box-shadow:inset 0 -3px #10b98140;border:none}.scalesOverlay .hint--a{left:-2%}.scalesOverlay .hint--b{left:110px}.scaleNum--clickable{border:2px solid rgba(138,142,233,.55);box-shadow:0 0 0 4px #8a8ee91f;cursor:pointer;background:#fff}.scaleNum--disabled{opacity:.6;cursor:default;box-shadow:none}.scaleNum--locked{opacity:.8}.scaleOp{font-size:30px;font-weight:900;opacity:.85}.scalesPlusRow{margin-top:12px;display:flex;align-items:center;gap:12px}.plusToken{width:64px;height:44px;border-radius:12px;border:2px solid rgba(138,142,233,.55);display:flex;align-items:center;justify-content:center;font-weight:900;cursor:grab;background:#fff;box-shadow:0 6px 14px #8a8ee92e}.plusToken--dragging{opacity:.7}.scalesPlusHint{color:var(--muted);font-weight:700;font-size:14px}.scalesAnswerRow{margin-top:0}.scalesRow{display:flex;align-items:flex-start;justify-content:center;gap:14px;margin-top:14px}.scalesBeam{margin-top:28px;font-weight:900;font-size:28px;opacity:.35}.scalesPan{width:180px;padding:12px;border-radius:16px;border:2px dashed rgba(138,142,233,.25);display:flex;flex-direction:column;align-items:center;gap:8px;transition:transform .25s ease}.scalesPan__label{font-size:13px;font-weight:800;color:var(--muted)}.scalesPan--down{transform:translateY(10px)}.scalesPan--locked{pointer-events:none}.scalesDragRow{margin-top:12px;display:flex;align-items:center;gap:12px}.scalesChip{display:inline-flex;align-items:center;justify-content:center;height:44px;min-width:64px;padding:0 14px;border-radius:14px;border:2px solid rgba(138,142,233,.45);background:#fff;font-weight:900;font-size:18px;cursor:grab;box-shadow:0 6px 14px #8a8ee92e}.scalesChip:active{cursor:grabbing}.exprHint--okOnly{background:#e6f9ee;color:#065f46;box-shadow:inset 0 -3px #10b98140}.cupChip--result.cupChip--hl{background:var(--ok-bg);border-color:var(--ok-border)}.exprRow--main{flex-wrap:nowrap;align-items:center;gap:10px;overflow-x:auto;-webkit-overflow-scrolling:touch}.exprRow--main .slot{padding:6px;min-width:56px}.exprInlineAnswer{display:inline-flex;align-items:center;gap:10px;flex:0 0 auto;white-space:nowrap}.exprInlineAnswer .answerInput{width:120px;flex:0 0 120px;margin:0}.exprInlineAnswer .btn-primary{flex:0 0 auto;white-space:nowrap}.exprRow.exprRow--main{flex-wrap:nowrap!important;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap}.exprRow.exprRow--main>*{flex:0 0 auto}.exprRow.exprRow--main .slot{flex:0 0 auto}.exprRow.exprRow--main .answerInput{flex:0 0 120px;width:120px}.exprRow.exprRow--main{flex-wrap:nowrap!important;align-items:center!important;overflow-x:auto;-webkit-overflow-scrolling:touch}.exprRow.exprRow--main .slot{min-width:52px;padding:4px}.exprRow.exprRow--main .token{min-width:44px;min-height:44px;font-size:22px}.exprRow.exprRow--main .plus{font-size:22px;line-height:1;font-weight:800}.exprRow.exprRow--main .exprEquals{font-size:22px;line-height:1;font-weight:900;margin-left:10px}.exprRow.exprRow--main .exprInlineAnswer{display:inline-flex;align-items:center;gap:10px;flex:0 0 auto;white-space:nowrap}.exprRow.exprRow--main .exprInlineAnswer .answerInput{width:110px;flex:0 0 110px}.exprRow.exprRow--main .exprInlineAnswer .btn-primary{flex:0 0 auto;white-space:nowrap}.rescueMission{padding:18px 0 10px;border-top:1px solid rgba(229,231,235,.9)}.rescueMission:first-child{border-top:none;padding-top:0}.rescueMission--done{pointer-events:none}.rescueExpression{font-size:36px;font-weight:600;line-height:1.15;letter-spacing:.2px;margin:6px 0 14px;color:#111827d9}.rescueMission--done .rescueExpression{color:#11182773}.rescueSolvedBlock{display:grid;grid-template-columns:64px 1fr;column-gap:16px;align-items:center;margin:8px 0 10px}.rescueSolvedCheck{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;background:#eaf7ef;color:#22c55e;font-size:28px;font-weight:900}.rescueSolvedContent{display:grid;row-gap:8px}.rescueSolvedText{font-size:36px;font-weight:600;line-height:1.15;color:#11182773}.toolHint{margin-top:14px;padding:10px 12px;border-radius:12px;background:#fef2f2;color:#991b1b;font-size:14px;font-weight:800;line-height:1.2;box-shadow:inset 0 -2px #ef44442e;text-align:center}@media(max-width:600px){.rescueExpression,.rescueSolvedText{font-size:28px}.rescueSolvedCheck{width:44px;height:44px;font-size:24px}}.taskHeader.taskHeader--withBack{display:flex;align-items:flex-start;gap:12px;justify-content:flex-start}.taskHeader.taskHeader--withBack .h1{margin:6px 0 0}.circleBackBtn{flex:0 0 auto;width:44px;height:44px;border-radius:50%;border:2px solid var(--accent);background:#fff;color:var(--accent);display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 10px #8a8ee940;transition:transform .08s ease,box-shadow .15s ease,background .15s ease}.circleBackBtn .circleBackBtn__icon{width:22px;height:22px}.circleBackBtn .circleBackBtn__icon{width:24px;height:24px}.circleBackBtn:hover{background:#f3f4ff;box-shadow:0 5px 14px #8a8ee959}.circleBackBtn:active{transform:scale(.96);box-shadow:0 3px 8px #8a8ee940}@media(max-width:480px)and (orientation:portrait){.overlayRight{left:50%!important;transform:translate(-50%) translateY(var(--rightShift, 0px))!important}.overlayLeft,.overlayRight{font-size:26px!important}.rightExprRow{gap:6px!important}.cupInput{width:52px!important;height:38px!important;font-size:22px!important;border-radius:12px!important}.cupInput--result{width:60px!important}.chipOp{font-size:22px!important;line-height:1!important}.rightExprRow{flex-wrap:nowrap!important;white-space:nowrap!important}}@media(max-width:480px)and (orientation:portrait){.scalesWrap{--rightScale: .68}.overlayRight{left:80%!important;top:5%!important;transform:translate(-50%) translateY(var(--rightShift, 0px)) scale(var(--rightScale))!important;transform-origin:top center!important}.rightExprRow{gap:3px!important;flex-wrap:nowrap!important;white-space:nowrap!important}.cupInput{width:48px!important;height:38px!important;font-size:18px!important;border-radius:12px!important}.cupInput--result{width:48px!important}.scalesOverlay .hint{transform:scale(var(--rightScale))!important;transform-origin:left bottom!important}}@media(max-width:480px)and (orientation:portrait){.scalesOverlay .hint{top:-70px}.scalesOverlay .hint--b{left:73px}.scalesOverlay .hint--a{left:0}}@media(max-width:480px)and (orientation:portrait){.overlayLeft{gap:3px!important}.overlayLeft .cupChip{width:28px!important;height:30px!important;font-size:12px!important;border-radius:10px!important}.overlayLeft .cupChip--result{width:28px!important}.overlayLeft .chipOp{font-size:16px!important;line-height:1!important}}@media(max-width:480px)and (orientation:portrait){.overlayLeft{transform:translate(-1px) translateY(-4px)!important}}@media(max-width:480px){:root{--footer-h: 130px}}@media(max-width:520px)and (orientation:portrait){.exprCard .exprRow{gap:5px}.exprCard{--m: .5}.exprCard .token{min-width:calc(56px * var(--m));min-height:calc(56px * var(--m));font-size:calc(32px * var(--m));border-radius:calc(14px * var(--m))}.exprCard .plus,.exprCard .exprEquals{font-size:calc(32px * var(--m));line-height:1}.exprCard input,.exprCard .answerInput{width:calc(140px * var(--m));height:calc(56px * var(--m));font-size:calc(26px * var(--m));border-radius:calc(14px * var(--m));flex:0 0 auto}.exprCard--solved .token,.exprRow--solved .token{font-size:calc(26px * var(--m))}}@media(max-width:520px)and (orientation:portrait){.exprCard.magnetCard.exprCard--solved .exprEquals{font-size:22px!important;font-weight:900;margin-left:4px;margin-right:2px}.exprCard.magnetCard.exprCard--solved .exprRow>:last-child{font-size:22px!important;font-weight:900}.exprCard.magnetCard.exprCard--solved .exprRow>:last-child.token{min-width:40px;min-height:40px}}.exprCard.magnetCard .plus,.exprCard.magnetCard .exprEquals,.exprCard.magnetCard .magnetOp{font-size:16px!important}.magnetCard{padding-top:10px}.magnetCard .exprRow:first-child,.magnetCard .stack{margin-top:0}.magnetCard input,.magnetCard .answerInput{width:60px;min-width:60px;height:40px;font-size:18px;border-radius:10px}.magnetCard{--mag: .8}.exprCard.magnetCard .token{min-width:34px!important;min-height:34px!important;font-size:22px!important;padding:0 6px;border-radius:8px}.exprCard.magnetCard .plus,.exprCard.magnetCard .exprEquals{font-size:18px!important;margin:0 2px}.magnetCard .exprRow{gap:8px}.magnetCard{padding:18px 12px}.magnetCard .exprRow{gap:4px}.magnetCard .exprRow+.exprRow{margin-top:4px}.magnetCard .token{min-width:34px;min-height:34px;padding:0 6px;font-size:16px;border-radius:8px}.magnetCard .plus,.magnetCard .exprEquals{font-size:18px;margin:0 2px}@media(max-width:520px)and (orientation:portrait){.exprCard .token--picked{transform:translateY(-4px) scale(1.06);background:#eef2ff;border:2px solid rgba(138,142,233,1);box-shadow:0 14px 28px #8a8ee959,0 0 0 6px #8a8ee926;transition:all .2s ease}.exprCard .slot--target{border-radius:16px;animation:glowPulse 1s ease-in-out infinite}@keyframes glowPulse{0%{box-shadow:0 0 #8a8ee966;transform:scale(1)}50%{box-shadow:0 0 0 10px #8a8ee91f;transform:scale(1.03)}to{box-shadow:0 0 #8a8ee966;transform:scale(1)}}.exprCard .slot{-webkit-tap-highlight-color:transparent}.exprCard .slot:active{transform:scale(.98)}}@media(max-width:520px)and (orientation:portrait){.exprCard .exprInlineAnswer .answerInput{width:48px!important;min-width:48px!important;max-width:48px!important;flex:0 0 48px!important;padding:0!important}}@media(max-width:520px)and (orientation:portrait){html,body{overflow-x:hidden}.panel--task .exprCard{overflow:hidden}.panel--task .exprCard .exprRow,.panel--task .exprCard .exprHintRow,.panel--task .exprCard .exprLabel{--s: .88;transform:scale(var(--s));transform-origin:left top;width:calc(100% / var(--s))}}@media(max-width:390px){.exprCard--withMark .exprRow--main{overflow-x:hidden!important;gap:0px!important;flex-wrap:nowrap!important}.exprCard--withMark .token{min-width:42px!important;min-height:42px!important;font-size:18px!important;padding:0 4px!important;border-radius:10px!important}.exprCard--withMark .plus{font-size:18px!important;line-height:1!important;margin:0!important}.exprCard--withMark .exprEquals{font-size:18px!important;line-height:1!important;margin:0 0 0 2px!important;white-space:nowrap!important}}@media(max-width:520px){.exprInlineAnswer{display:flex;align-items:center}.exprInlineAnswer .answerInput{width:42px!important;height:42px!important;min-width:42px!important;min-height:42px!important;padding:0!important;font-size:18px!important;text-align:center!important;border-radius:10px!important;box-sizing:border-box!important;flex:0 0 42px!important}}.rotateGate{display:none}@media(max-width:900px)and (orientation:landscape){.rotateGate{display:flex;position:fixed;inset:0;z-index:999999;background:#f3f6ff;align-items:center;justify-content:center;padding:20px}.topbar,.content,.footerNav{pointer-events:none;-webkit-user-select:none;user-select:none}.rotateGate,.rotateGate *{pointer-events:auto}.rotateGate{touch-action:none}.rotateGate__card{width:min(520px,92vw);background:#fff;border:2px solid rgba(138,142,233,.35);border-radius:20px;padding:18px 16px;box-shadow:0 18px 40px #0000001a;text-align:center}.rotateGate__title{font-weight:800;font-size:22px;margin-bottom:8px;color:#111827}.rotateGate__text{font-size:16px;color:#6b7280;line-height:1.35}}@media(max-width:520px)and (orientation:portrait){.panel--task .exprCard.hammerCard{overflow:visible!important}}@media(max-width:900px){.exprCard.hammerCard{padding-top:6px!important}.exprCard.hammerCard .exprRow{gap:6px!important;flex-wrap:nowrap!important;align-items:center!important;white-space:nowrap!important}.exprCard.hammerCard .token,.exprCard.hammerCard .pickToken{min-width:44px!important;min-height:44px!important;padding:0 8px!important;border-radius:12px!important;font-size:20px!important;font-weight:900!important;line-height:1!important}.exprCard.hammerCard .plus,.exprCard.hammerCard .exprEquals{font-size:20px!important;font-weight:900!important;line-height:1!important;margin:0 2px!important}.exprCard.hammerCard .answerInput{width:44px!important;height:44px!important;min-width:44px!important;padding:0!important;border-radius:12px!important;font-size:20px!important;font-weight:900!important;line-height:1!important;flex:0 0 44px!important}.exprCard.hammerCard .exprRow--expanded{gap:6px!important;flex-wrap:nowrap!important;white-space:nowrap!important}}.cupInput:disabled,.cupInput[readonly]{opacity:1;-webkit-text-fill-color:rgba(17,24,39,.55);background:#fffffff2}@media(max-width:520px){.scalesOverlay .hint{font-size:24px!important;padding:14px 18px!important;border-radius:16px!important;box-shadow:inset 0 -3px #10b98159}.scalesOverlay .hint--a{left:-20px!important}.scalesOverlay .hint--b{left:58px!important}}.cupInput.cupInput--hl[readonly],.cupInput.cupInput--hl:disabled,.cupInput.magnetInput--ok[readonly],.cupInput.magnetInput--ok:disabled{background:var(--ok-bg)!important;border-color:var(--ok-border)!important;-webkit-text-fill-color:#111827!important;color:#111827!important;opacity:1!important}.app{min-height:calc(var(--vvh, 1vh) * 100)}html.kbd-open .footerNav{transform:translateY(110%);transition:transform .2s ease}html.kbd-open .content{padding-bottom:calc(var(--kb, 0px) + 16px)}@media(max-width:600px){.rescueMission--done .rescueExpression,.rescueMission--done .rescueSolvedText{font-size:22px!important;line-height:1.12}}
